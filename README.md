# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Базовый код
Класс Api

Представляет собой программный интерфейс приложения, который обеспечивает взаимодействие между различными программами или компонентами программного обеспечения. Этот класс обладает рядом методов, которые позволяют осуществлять запросы к удаленным серверам, получать и отправлять данные, обрабатывать ответы и управлять соединениями.
Методы:
- ```get(uri: string)``` - выполняет GET запрос к указанному URI (Uniform Resource Identifier) и возвращает данные, полученные в результате запроса. В качестве аргумента метод принимает строку uri, которая представляет собой адрес ресурса, к которому нужно обратиться. Этот метод позволяет получить информацию с сервера без изменения состояния данных на сервере и обычно используется для получения данных из API.
- ```post(uri: string, data: object, method: ApiPostMethods = 'POST')``` - используется для отправки POST-запросов на указанный URI с переданными данными. Параметр uri представляет собой строку, содержащую URL-адрес, куда будет отправлен запрос. Параметр data является объектом, содержащим данные, которые будут отправлены с запросом. Метод также принимает необязательный параметр method типа ApiPostMethods, который задает HTTP-метод запроса (по умолчанию установлен как 'POST').
- ```handleResponse(response: Response)``` - представляет собой защищенный метод в классе `Api`, который принимает объект `Response` в качестве аргумента. Внутри метода осуществляется проверка статуса ответа. Если статус ответа является успешным, то метод возвращает разбираемый в JSON формате объект ответа. В случае ошибки, метод также разбирает объект ответа в формате JSON и возвращает объект ошибки или текст статуса ответа. 

Класс EventEmitter

Представляет собой механизм для работы с событиями в языке программирования TypeScript. Этот класс обеспечивает возможность создания, прослушивания и управления событиями в приложении.
Основные методы, реализуемые классом описаны интерфейсом "IEvents":
- on - позволяет подписаться на событие с определенным именем и задать функцию-обработчик, которая будет вызвана при наступлении события.
- off - удаляет обработчик с определенного события;
- emit - вызывает все обработчики, подписанные на указанное событие, передавая им переданные аргументы.
- onAll - добавляет обработчик, который будет вызываться при возникновении любого события.
- offAll - удаляет обработчики событий.
- trigger - используется для генерации событий. При вызове этого метода все обработчики, зарегистрированные для указанного события, будут вызваны, и им будут переданы аргументы.

## Данные

Класс StorData

Класс отвечает за хранение данных.
Все поля приватные, доступ через методы.
В полях класса хранится следующее:
- products: IProduct[] - массив продуктов (товаров);
- basket: IProduct[] - массив продуктов (товаров) в корзине;
- order: IOrder - заказ.

Набор методов для взаимодействия с данными:
- setProducts - получаем продукты (товары) для главной страницы;
- selectProduct - выбор продукта (товара) для отображения в модальном окне;
- addProductToBasket - добавление продукта (товара) в корзину;
- removeProductFromBasket - удаление продукта (товара) из корзины;
- getProductInBasket - получение продукта (товара) в корзине;
- getTotalPrice - получение итоговой стоимости в корзине;
- clearBasket - удаление продукта (товара) в корзине;
- clearOrder - удаление текущего заказа;
- setOrderField - запись значения в поле заказа;
- validateOrder - валидация полей заказа и установка значений ошибок, в случае если они имеются

## Компоненты данных

Интерфейс IModalData
Представляет содержимое окна.

Класс Modal
Общий класс для модальных окон.

Основные методы:
- set - установка содержимое модального окна;
- open - открытие модального окна.
- close - закрытие модального окна.

Класс Form
Общий класс для работы с формами.

Класс BasketView
Отображает содержимое корзины.

Основные методы:
- set basket - установка списка содержимого в корзине;
- set total - установка общей суммы содержимого в корзине.

Класс ProductView
Отображает продукт (товар) на главной странице

Класс ProductViewModal
Отображает продукт (товар) в модальном окне.

Класс OrderFormView
Отображает форму заказа.

Класс OrderResultView
Отображает результат заказа.

## Основные события

- product: preview - открытие продукта (товара) в модальном окне;
- modal: open - открытие модального окна;
- modal: close - закрытие модального окна;
- basket: create - оформление заказа;
- basket: add - добавление продукта (товара) в корзину;
- basket: open - открытие корзины;
- basket: remove - удаление продукта (товара) из корзины;
- order: open - открытие формы заказа;
- order: set-payment - выбор способа оплаты;
- order: clear - очистка формы заказа;
- form: error - показ ошибок формы.

