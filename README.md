# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Базовый код
Класс Api

Представляет собой программный интерфейс приложения, который обеспечивает взаимодействие между различными программами или компонентами программного обеспечения. Этот класс обладает рядом методов, которые позволяют осуществлять запросы к удаленным серверам, получать и отправлять данные, обрабатывать ответы и управлять соединениями.
Методы:
- ```get(uri: string)``` - выполняет GET запрос к указанному URI (Uniform Resource Identifier) и возвращает данные, полученные в результате запроса. В качестве аргумента метод принимает строку uri, которая представляет собой адрес ресурса, к которому нужно обратиться. Этот метод позволяет получить информацию с сервера без изменения состояния данных на сервере и обычно используется для получения данных из API.
- ```post(uri: string, data: object, method: ApiPostMethods = 'POST')``` - используется для отправки POST-запросов на указанный URI с переданными данными. Параметр uri представляет собой строку, содержащую URL-адрес, куда будет отправлен запрос. Параметр data является объектом, содержащим данные, которые будут отправлены с запросом. Метод также принимает необязательный параметр method типа ApiPostMethods, который задает HTTP-метод запроса (по умолчанию установлен как 'POST').
- ```handleResponse(response: Response)``` - представляет собой защищенный метод в классе `Api`, который принимает объект `Response` в качестве аргумента. Внутри метода осуществляется проверка статуса ответа. Если статус ответа является успешным, то метод возвращает разбираемый в JSON формате объект ответа. В случае ошибки, метод также разбирает объект ответа в формате JSON и возвращает объект ошибки или текст статуса ответа. 

Класс EventEmitter

Представляет собой механизм для работы с событиями в языке программирования TypeScript. Этот класс обеспечивает возможность создания, прослушивания и управления событиями в приложении.
Основные методы, реализуемые классом описаны интерфейсом "IEvents":
- on - позволяет подписаться на событие с определенным именем и задать функцию-обработчик, которая будет вызвана при наступлении события.
- off - удаляет обработчик с определенного события;
- emit - вызывает все обработчики, подписанные на указанное событие, передавая им переданные аргументы.
- onAll - добавляет обработчик, который будет вызываться при возникновении любого события.
- offAll - удаляет обработчики событий.
- trigger - используется для генерации событий. При вызове этого метода все обработчики, зарегистрированные для указанного события, будут вызваны, и им будут переданы аргументы.

Класс Component
Представляет собой абстрактный класс, предназначенный для создания компонентов интерфейса.
Содержит методы управления DOM-элементами.

Методы класса:
- toggleClass(element: HTMLElement, className: string, force?: boolean) - переключает класс у элемента.
- setText(element: HTMLElement, value: unknown) - устанавливает текстовое содержимое переданному элементу.
- setDisabled(element: HTMLElement, state: boolean) - устанавливает состояние блокировки элемента.
- setHidden(element: HTMLElement) - скрывает элемент.
- setVisible(element: HTMLElement) - отображает элемент.
- setImage(element: HTMLImageElement, src: string, alt?: string) - устанавливает элементу изображение. 
- render(data?: Partial): HTMLElement - возвращает корневой DOM-элемент.

Класс Model
Класс модели данных, работает с дженериками.

## Данные

Класс CardData
Класс хранит данные об отдельной карточке продукта (товара).

В полях класса хранится следующее:
- id: string - id карточки;
- category: string - категория (тег) карточки;
- title: string - название карточки;
- description: string - описание карточки;
- image: string - ссылка на изображение карточки;
- price: number | null - цена продукта (товара) в карточке.

Класс StorData

Класс отвечает за хранение данных.
Все поля приватные, доступ через методы.
В полях класса хранится следующее:
- products: IProduct[] - массив продуктов (товаров);
- basket: IProduct[] - массив продуктов (товаров) в корзине;
- order: IOrder - заказ.

Набор методов для взаимодействия с данными:
- setProducts - получаем продукты (товары) для главной страницы;
- selectProduct - выбор продукта (товара) для отображения в модальном окне;
- addProductToBasket - добавление продукта (товара) в корзину;
- removeProductFromBasket - удаление продукта (товара) из корзины;
- getProductInBasket - получение продукта (товара) в корзине;
- getTotalPrice - получение итоговой стоимости в корзине;
- clearBasket - удаление продукта (товара) в корзине;
- clearOrder - удаление текущего заказа;
- setOrderField - запись значения в поле заказа;
- validateOrder - валидация полей заказа и установка значений ошибок, в случае если они имеются

## Компоненты отображения данных

Класс Page
Представляет собой класс для управления содержимым веб-страницы.

Методы класса:
- set counter(value: number): установка значения счетчика корзины;
- set catalog(items: HTMLElement[]): установка содержимого каталога продуктов (товаров);
- set locked(value: boolean): установка состояния блокировки страницы.

Класс Product
Представляет собой отображение карточки, задавая в ней данные: категорию, название, описание, изображение и цену.

Поля класса:
- protected_category - категория (тег) карточки;
- protected_title - название карточки;
- protected_description - описание карточки;
- protected_image - изображение карточки;
- protected_price - цена продукта (товара) в карточке.

Методы класса:
- set id(value: string) - присвоение карточки id;
- get id() - возвращение карточки id;
- set title(value: string) - присвоение карточки названия;
- get title() - возвращение строки с название продукта (товара);
- set image(value: string) - присвоение карточке переданного изображения;
- set description(value: string) - присвоение карточки описания;
- set category(value: string) - присвоение карточки категории;
- set price(value: number | null) - присвоение карточки цены или нет, если цена = null.

Интерфейс IModalData
Представляет содержимое окна.

Класс Modal
Класс отвечает за отображение всех модальных окон на сайте. Внутри себя содержит контент других компонентов представления.

Основные методы:
- set - установка содержимое модального окна;
- open - открытие модального окна.
- close - закрытие модального окна.
- render - представление на странице элемент модального окна и элемент переданного аргумента.

Класс Form
Класс используется другими компонентами с формами и отвечает за управление формами, позволяя отправлять форму, отображать сообщения об ошибках и уведомлять об изменениях.

Методы класса:
- inputChange - обрабатывает события ввода;
- set valid(value: boolean) - определяет форму как валидную.
- set errors(value: string) - устанавливает текст ошибок валидации формы.
- render(state: Partial & IFormState) - отображает форму и ошибки

Класс BasketView
Отображает содержимое корзины.

Основные методы:
- set basket - установка списка содержимого в корзине;
- set total - установка общей суммы содержимого в корзине.

Класс ProductView
Отображает продукт (товар) на главной странице

Класс ProductViewModal
Отображает продукт (товар) в модальном окне.

Класс OrderFormView
Класс наследуется от класса Form и отвечает за демонстрацию формы заказа.

Методы класса:
- set phone - установка номера телефона.
- set email - установка адреса электронной почты.
- get buttonCard - установка оплаты безналичной формой расчета.
- get buttonCash - установка оплаты наличной формой расчета.


Класс OrderResultView
Класс наследуется от класса Form и отвечает за демонстрацию результата заказа.

Методы класса:
- set total - устанавливает текстовое сообщение с итоговой суммой заказа.

## Основные события

- catalog: change - изменение продуктов (товаров) в каталоге;
- product: preview - открытие продукта (товара) в модальном окне;
- modal: open - открытие модального окна;
- modal: close - закрытие модального окна;
- basket: create - оформление заказа;
- basket: add - добавление продукта (товара) в корзину;
- basket: open - открытие корзины;
- basket: remove - удаление продукта (товара) из корзины;
- order: open - открытие формы заказа;
- order: set-payment - выбор способа оплаты;
- order: clear - очистка формы заказа;
- form: error - показ ошибок формы.

